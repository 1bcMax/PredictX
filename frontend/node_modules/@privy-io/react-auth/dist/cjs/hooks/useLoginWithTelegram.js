"use strict";var e=require("react"),r=require("../errors.js"),t=require("./captcha-context.js"),i=require("./internal-context.js");require("ofetch"),require("react/jsx-runtime"),require("./index.js"),require("../utils/index.js"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js"),require("../utils/eth/getPublicClient.js"),require("viem");exports.useLoginWithTelegram=s=>{let a=t.useCaptcha(),{initLoginWithTelegram:n,loginWithTelegram:o,telegramAuthState:u,setTelegramAuthState:l}=i.usePrivyInternal();return{login:e.useCallback((async e=>{try{if(a.enabled&&"success"!==a.status)throw new t.CaptchaError(a.error,null,r.PrivyErrorCode.CAPTCHA_FAILURE);await n(a.token,e?.disableSignup);let{user:i,isNewUser:u,loginAccount:l,wasAlreadyAuthenticated:c}=await o({intent:"login"});s?.onComplete?.({user:i,isNewUser:u,wasAlreadyAuthenticated:c,loginMethod:"telegram",loginAccount:l})}catch(e){throw l({status:"error",error:e}),s?.onError?.(e.privyErrorCode||r.PrivyErrorCode.UNKNOWN_AUTH_ERROR),e}}),[n,o,a]),state:u}};
