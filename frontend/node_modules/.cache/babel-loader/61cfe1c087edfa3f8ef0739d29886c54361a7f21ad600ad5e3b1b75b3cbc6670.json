{"ast":null,"code":"import { jsx as e } from \"react/jsx-runtime\";\nimport { notImplemented as t } from \"./index.mjs\";\nimport { createContext as r, useRef as s, useState as o, useMemo as i, useContext as a } from \"react\";\nimport { PrivyError as n, PrivyErrorCode as c } from \"../errors.mjs\";\nimport { pollForResult as u } from \"../utils/index.mjs\";\nimport \"ofetch\";\nimport \"../connectors/get-legacy-injected-providers.mjs\";\nimport \"../connectors/is-wallet-installed.mjs\";\nimport \"../utils/eth/getPublicClient.mjs\";\nimport \"viem\";\nconst d = /*#__PURE__*/r({\n  siteKey: \"\",\n  enabled: !1,\n  appId: void 0,\n  token: void 0,\n  error: void 0,\n  status: \"disabled\",\n  setToken: t,\n  setError: t,\n  setExecuting: t,\n  waitForResult: () => Promise.resolve(\"\"),\n  ref: {\n    current: null\n  },\n  remove: t,\n  reset: t,\n  execute: t\n});\nclass l extends n {\n  constructor(e, t, r) {\n    super(e || \"Captcha failed\"), this.type = \"Captcha\", t instanceof Error && (this.cause = t), this.privyErrorCode = r;\n  }\n}\nconst m = ({\n    children: t,\n    id: r,\n    captchaSiteKey: a,\n    captchaEnabled: n\n  }) => {\n    let m = s(null),\n      [p, v] = o(),\n      [h, f] = o(),\n      [x, y] = o(!1),\n      j = i(() => n ? x || p || h ? !x || p || h ? p && !h ? {\n        status: \"success\",\n        token: p\n      } : h ? {\n        status: \"error\",\n        error: h\n      } : {\n        status: \"ready\"\n      } : {\n        status: \"loading\"\n      } : {\n        status: \"ready\"\n      } : {\n        status: \"disabled\"\n      }, [n, p, h, x]); /*#__PURE__*/\n    return e(d.Provider, {\n      value: {\n        ...j,\n        ref: m,\n        enabled: n,\n        siteKey: a,\n        appId: r,\n        setToken: v,\n        setError: f,\n        setExecuting: y,\n        remove() {\n          n && (m.current?.remove(), y(!1), f(void 0), v(void 0));\n        },\n        reset() {\n          n && (m.current?.reset(), y(!1), f(void 0), v(void 0));\n        },\n        execute() {\n          n && (y(!0), m.current?.execute());\n        },\n        async waitForResult() {\n          if (!n) return \"\";\n          try {\n            return await u(() => m.current?.getResponse(), {\n              interval: 200,\n              timeout: 2e4\n            });\n          } catch (e) {\n            throw new l(\"Captcha failed\", null, c.CAPTCHA_TIMEOUT);\n          }\n        }\n      },\n      children: t\n    });\n  },\n  p = () => a(d);\nexport { d as CaptchaContext, l as CaptchaError, m as CaptchaProvider, p as useCaptcha };","map":{"version":3,"names":["jsx","e","notImplemented","t","createContext","r","useRef","s","useState","o","useMemo","i","useContext","a","PrivyError","n","PrivyErrorCode","c","pollForResult","u","d","siteKey","enabled","appId","token","error","status","setToken","setError","setExecuting","waitForResult","Promise","resolve","ref","current","remove","reset","execute","l","constructor","type","Error","cause","privyErrorCode","m","children","id","captchaSiteKey","captchaEnabled","p","v","h","f","x","y","j","Provider","value","getResponse","interval","timeout","CAPTCHA_TIMEOUT","CaptchaContext","CaptchaError","CaptchaProvider","useCaptcha"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/captcha-context.mjs"],"sourcesContent":["import{jsx as e}from\"react/jsx-runtime\";import{notImplemented as t}from\"./index.mjs\";import{createContext as r,useRef as s,useState as o,useMemo as i,useContext as a}from\"react\";import{PrivyError as n,PrivyErrorCode as c}from\"../errors.mjs\";import{pollForResult as u}from\"../utils/index.mjs\";import\"ofetch\";import\"../connectors/get-legacy-injected-providers.mjs\";import\"../connectors/is-wallet-installed.mjs\";import\"../utils/eth/getPublicClient.mjs\";import\"viem\";const d=/*#__PURE__*/r({siteKey:\"\",enabled:!1,appId:void 0,token:void 0,error:void 0,status:\"disabled\",setToken:t,setError:t,setExecuting:t,waitForResult:()=>Promise.resolve(\"\"),ref:{current:null},remove:t,reset:t,execute:t});class l extends n{constructor(e,t,r){super(e||\"Captcha failed\"),this.type=\"Captcha\",t instanceof Error&&(this.cause=t),this.privyErrorCode=r}}const m=({children:t,id:r,captchaSiteKey:a,captchaEnabled:n})=>{let m=s(null),[p,v]=o(),[h,f]=o(),[x,y]=o(!1),j=i((()=>n?x||p||h?!x||p||h?p&&!h?{status:\"success\",token:p}:h?{status:\"error\",error:h}:{status:\"ready\"}:{status:\"loading\"}:{status:\"ready\"}:{status:\"disabled\"}),[n,p,h,x]);/*#__PURE__*/return e(d.Provider,{value:{...j,ref:m,enabled:n,siteKey:a,appId:r,setToken:v,setError:f,setExecuting:y,remove(){n&&(m.current?.remove(),y(!1),f(void 0),v(void 0))},reset(){n&&(m.current?.reset(),y(!1),f(void 0),v(void 0))},execute(){n&&(y(!0),m.current?.execute())},async waitForResult(){if(!n)return\"\";try{return await u((()=>m.current?.getResponse()),{interval:200,timeout:2e4})}catch(e){throw new l(\"Captcha failed\",null,c.CAPTCHA_TIMEOUT)}}},children:t})},p=()=>a(d);export{d as CaptchaContext,l as CaptchaError,m as CaptchaProvider,p as useCaptcha};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}