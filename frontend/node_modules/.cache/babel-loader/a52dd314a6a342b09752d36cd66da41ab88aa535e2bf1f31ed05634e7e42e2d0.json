{"ast":null,"code":"import { OAuthInit as e, OAuthAuthenticate as t, OAuthLink as i, OAuthUnlink as r } from \"@privy-io/public-api\";\nimport { PrivyClientError as s } from \"../../Error.mjs\";\nimport { createCodeVerifier as a, createStateCode as o, deriveCodeChallengeFromCodeVerifier as l, CODE_VERIFIER_KEY as d, STATE_CODE_KEY as n } from \"../../pkce.mjs\";\nimport { maybeCreateWalletOnLogin as h } from \"./maybeCreateWalletOnLogin.mjs\";\nimport \"jose\";\nimport \"../../utils/getUserEmbeddedEthereumWallet.mjs\";\nimport \"../../utils/getAllUserEmbeddedEthereumWallets.mjs\";\nimport \"../../utils/getUserEmbeddedSolanaWallet.mjs\";\nimport \"../../utils/getAllUserEmbeddedSolanaWallets.mjs\";\nimport \"../../utils/shouldCreateEmbeddedEthWallet.mjs\";\nimport \"../../utils/shouldCreateEmbeddedSolWallet.mjs\";\nclass p {\n  async generateURL(t, i) {\n    let r = a(),\n      s = o(),\n      h = await l({\n        codeVerifier: r,\n        digest: this._crypto?.digest\n      });\n    return await Promise.all([this._storage.put(d, r), this._storage.put(n, s)]), this._privyInternal.fetch(e, {\n      body: {\n        redirect_to: i,\n        provider: t,\n        code_challenge: h,\n        state_code: s\n      }\n    });\n  }\n  async loginWithCode(e, i, r, a, o, l) {\n    let [p, m] = await Promise.all([this._storage.get(d), this._storage.get(n)]);\n    if (m !== i) throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\", {\n      flow: \"oauth\",\n      provider: r,\n      storedStateCode: m ?? \"\",\n      returnedStateCode: i ?? \"\"\n    }), new s({\n      code: \"pkce_state_code_mismatch\",\n      error: \"Unexpected auth flow. This may be a phishing attempt.\"\n    });\n    let _ = await this._privyInternal.fetch(t, {\n      body: {\n        authorization_code: e,\n        code_type: a,\n        state_code: m,\n        code_verifier: p,\n        mode: o\n      }\n    });\n    await this._privyInternal.session.updateWithTokensResponse(_);\n    let c = await h(this._embedded, _, l?.embedded);\n    return await Promise.all([this._storage.del(d), this._storage.del(n)]), this._privyInternal.callbacks?.setUser?.(c.user), c;\n  }\n  async linkWithCode(e, t, r, a) {\n    let [o, l] = await Promise.all([this._storage.get(d), this._storage.get(n)]);\n    if (l !== t) throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\", {\n      flow: \"oauth\",\n      provider: r,\n      storedStateCode: l ?? \"\",\n      returnedStateCode: t ?? \"\"\n    }), new s({\n      code: \"pkce_state_code_mismatch\",\n      error: \"Unexpected auth flow. This may be a phishing attempt.\"\n    });\n    let h = await this._privyInternal.fetch(i, {\n      body: {\n        authorization_code: e,\n        code_type: a,\n        state_code: l,\n        code_verifier: o\n      }\n    });\n    await this._privyInternal.session.processOAuthTokens(h.oauth_tokens);\n    let p = await this._privyInternal.refreshSession();\n    return await Promise.all([this._storage.del(d), this._storage.del(n)]), p.user;\n  }\n  async unlink(e, t) {\n    return await this._privyInternal.fetch(r, {\n      body: {\n        provider: e,\n        subject: t\n      }\n    }), (await this._privyInternal.refreshSession()).user;\n  }\n  constructor(e, t, i, r) {\n    this._privyInternal = e, this._embedded = t, this._storage = i, this._crypto = r;\n  }\n}\nexport { p as default };","map":{"version":3,"names":["OAuthInit","e","OAuthAuthenticate","t","OAuthLink","i","OAuthUnlink","r","PrivyClientError","s","createCodeVerifier","a","createStateCode","o","deriveCodeChallengeFromCodeVerifier","l","CODE_VERIFIER_KEY","d","STATE_CODE_KEY","n","maybeCreateWalletOnLogin","h","p","generateURL","codeVerifier","digest","_crypto","Promise","all","_storage","put","_privyInternal","fetch","body","redirect_to","provider","code_challenge","state_code","loginWithCode","m","get","createAnalyticsEvent","flow","storedStateCode","returnedStateCode","code","error","_","authorization_code","code_type","code_verifier","mode","session","updateWithTokensResponse","c","_embedded","embedded","del","callbacks","setUser","user","linkWithCode","processOAuthTokens","oauth_tokens","refreshSession","unlink","subject","constructor","default"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/node_modules/@privy-io/js-sdk-core/dist/esm/client/auth/OAuthApi.mjs"],"sourcesContent":["import{OAuthInit as e,OAuthAuthenticate as t,OAuthLink as i,OAuthUnlink as r}from\"@privy-io/public-api\";import{PrivyClientError as s}from\"../../Error.mjs\";import{createCodeVerifier as a,createStateCode as o,deriveCodeChallengeFromCodeVerifier as l,CODE_VERIFIER_KEY as d,STATE_CODE_KEY as n}from\"../../pkce.mjs\";import{maybeCreateWalletOnLogin as h}from\"./maybeCreateWalletOnLogin.mjs\";import\"jose\";import\"../../utils/getUserEmbeddedEthereumWallet.mjs\";import\"../../utils/getAllUserEmbeddedEthereumWallets.mjs\";import\"../../utils/getUserEmbeddedSolanaWallet.mjs\";import\"../../utils/getAllUserEmbeddedSolanaWallets.mjs\";import\"../../utils/shouldCreateEmbeddedEthWallet.mjs\";import\"../../utils/shouldCreateEmbeddedSolWallet.mjs\";class p{async generateURL(t,i){let r=a(),s=o(),h=await l({codeVerifier:r,digest:this._crypto?.digest});return await Promise.all([this._storage.put(d,r),this._storage.put(n,s)]),this._privyInternal.fetch(e,{body:{redirect_to:i,provider:t,code_challenge:h,state_code:s}})}async loginWithCode(e,i,r,a,o,l){let[p,m]=await Promise.all([this._storage.get(d),this._storage.get(n)]);if(m!==i)throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\",{flow:\"oauth\",provider:r,storedStateCode:m??\"\",returnedStateCode:i??\"\"}),new s({code:\"pkce_state_code_mismatch\",error:\"Unexpected auth flow. This may be a phishing attempt.\"});let _=await this._privyInternal.fetch(t,{body:{authorization_code:e,code_type:a,state_code:m,code_verifier:p,mode:o}});await this._privyInternal.session.updateWithTokensResponse(_);let c=await h(this._embedded,_,l?.embedded);return await Promise.all([this._storage.del(d),this._storage.del(n)]),this._privyInternal.callbacks?.setUser?.(c.user),c}async linkWithCode(e,t,r,a){let[o,l]=await Promise.all([this._storage.get(d),this._storage.get(n)]);if(l!==t)throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\",{flow:\"oauth\",provider:r,storedStateCode:l??\"\",returnedStateCode:t??\"\"}),new s({code:\"pkce_state_code_mismatch\",error:\"Unexpected auth flow. This may be a phishing attempt.\"});let h=await this._privyInternal.fetch(i,{body:{authorization_code:e,code_type:a,state_code:l,code_verifier:o}});await this._privyInternal.session.processOAuthTokens(h.oauth_tokens);let p=await this._privyInternal.refreshSession();return await Promise.all([this._storage.del(d),this._storage.del(n)]),p.user}async unlink(e,t){return await this._privyInternal.fetch(r,{body:{provider:e,subject:t}}),(await this._privyInternal.refreshSession()).user}constructor(e,t,i,r){this._privyInternal=e,this._embedded=t,this._storage=i,this._crypto=r}}export{p as default};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}