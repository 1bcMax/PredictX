{"ast":null,"code":"import { useCallback as t } from \"react\";\nimport { PrivyErrorCode as e } from \"../errors.mjs\";\nimport { useCaptcha as r, CaptchaError as s } from \"./captcha-context.mjs\";\nimport { usePrivyInternal as o } from \"./internal-context.mjs\";\nimport \"ofetch\";\nimport \"react/jsx-runtime\";\nimport \"./index.mjs\";\nimport \"../utils/index.mjs\";\nimport \"../connectors/get-legacy-injected-providers.mjs\";\nimport \"../connectors/is-wallet-installed.mjs\";\nimport \"../utils/eth/getPublicClient.mjs\";\nimport \"viem\";\nconst i = i => {\n  let a = r(),\n    {\n      initLoginWithPasskey: n,\n      loginWithPasskey: c,\n      passkeyAuthState: m,\n      setPasskeyAuthState: l\n    } = o();\n  return {\n    loginWithPasskey: t(async t => {\n      try {\n        let r;\n        if (a.enabled && \"error\" === a.status) throw new s(a.error, null, e.CAPTCHA_FAILURE);\n        a.enabled && \"success\" !== a.status && (a.execute(), r = await a.waitForResult()), await n({\n          captchaToken: r,\n          withPrivyUi: !1\n        });\n        let {\n          user: o,\n          isNewUser: m,\n          wasAlreadyAuthenticated: l,\n          loginAccount: u\n        } = await c(t);\n        i?.onComplete?.({\n          user: o,\n          isNewUser: m,\n          wasAlreadyAuthenticated: l,\n          loginMethod: \"passkey\",\n          loginAccount: u\n        });\n      } catch (t) {\n        throw l({\n          status: \"error\",\n          error: t\n        }), i?.onError?.(t.privyErrorCode || e.UNKNOWN_AUTH_ERROR), t;\n      }\n    }, [c, a.status]),\n    state: m\n  };\n};\nexport { i as useLoginWithPasskey };","map":{"version":3,"names":["useCallback","t","PrivyErrorCode","e","useCaptcha","r","CaptchaError","s","usePrivyInternal","o","i","a","initLoginWithPasskey","n","loginWithPasskey","c","passkeyAuthState","m","setPasskeyAuthState","l","enabled","status","error","CAPTCHA_FAILURE","execute","waitForResult","captchaToken","withPrivyUi","user","isNewUser","wasAlreadyAuthenticated","loginAccount","u","onComplete","loginMethod","onError","privyErrorCode","UNKNOWN_AUTH_ERROR","state","useLoginWithPasskey"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/useLoginWithPasskey.mjs"],"sourcesContent":["import{useCallback as t}from\"react\";import{PrivyErrorCode as e}from\"../errors.mjs\";import{useCaptcha as r,CaptchaError as s}from\"./captcha-context.mjs\";import{usePrivyInternal as o}from\"./internal-context.mjs\";import\"ofetch\";import\"react/jsx-runtime\";import\"./index.mjs\";import\"../utils/index.mjs\";import\"../connectors/get-legacy-injected-providers.mjs\";import\"../connectors/is-wallet-installed.mjs\";import\"../utils/eth/getPublicClient.mjs\";import\"viem\";const i=i=>{let a=r(),{initLoginWithPasskey:n,loginWithPasskey:c,passkeyAuthState:m,setPasskeyAuthState:l}=o();return{loginWithPasskey:t((async t=>{try{let r;if(a.enabled&&\"error\"===a.status)throw new s(a.error,null,e.CAPTCHA_FAILURE);a.enabled&&\"success\"!==a.status&&(a.execute(),r=await a.waitForResult()),await n({captchaToken:r,withPrivyUi:!1});let{user:o,isNewUser:m,wasAlreadyAuthenticated:l,loginAccount:u}=await c(t);i?.onComplete?.({user:o,isNewUser:m,wasAlreadyAuthenticated:l,loginMethod:\"passkey\",loginAccount:u})}catch(t){throw l({status:\"error\",error:t}),i?.onError?.(t.privyErrorCode||e.UNKNOWN_AUTH_ERROR),t}}),[c,a.status]),state:m}};export{i as useLoginWithPasskey};\n"],"mappings":"AAAA,SAAOA,WAAW,IAAIC,CAAC,QAAK,OAAO;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,eAAe;AAAC,SAAOC,UAAU,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,wBAAwB;AAAC,OAAM,QAAQ;AAAC,OAAM,mBAAmB;AAAC,OAAM,aAAa;AAAC,OAAM,oBAAoB;AAAC,OAAM,iDAAiD;AAAC,OAAM,uCAAuC;AAAC,OAAM,kCAAkC;AAAC,OAAM,MAAM;AAAC,MAAMC,CAAC,GAACA,CAAC,IAAE;EAAC,IAAIC,CAAC,GAACN,CAAC,CAAC,CAAC;IAAC;MAACO,oBAAoB,EAACC,CAAC;MAACC,gBAAgB,EAACC,CAAC;MAACC,gBAAgB,EAACC,CAAC;MAACC,mBAAmB,EAACC;IAAC,CAAC,GAACV,CAAC,CAAC,CAAC;EAAC,OAAM;IAACK,gBAAgB,EAACb,CAAC,CAAE,MAAMA,CAAC,IAAE;MAAC,IAAG;QAAC,IAAII,CAAC;QAAC,IAAGM,CAAC,CAACS,OAAO,IAAE,OAAO,KAAGT,CAAC,CAACU,MAAM,EAAC,MAAM,IAAId,CAAC,CAACI,CAAC,CAACW,KAAK,EAAC,IAAI,EAACnB,CAAC,CAACoB,eAAe,CAAC;QAACZ,CAAC,CAACS,OAAO,IAAE,SAAS,KAAGT,CAAC,CAACU,MAAM,KAAGV,CAAC,CAACa,OAAO,CAAC,CAAC,EAACnB,CAAC,GAAC,MAAMM,CAAC,CAACc,aAAa,CAAC,CAAC,CAAC,EAAC,MAAMZ,CAAC,CAAC;UAACa,YAAY,EAACrB,CAAC;UAACsB,WAAW,EAAC,CAAC;QAAC,CAAC,CAAC;QAAC,IAAG;UAACC,IAAI,EAACnB,CAAC;UAACoB,SAAS,EAACZ,CAAC;UAACa,uBAAuB,EAACX,CAAC;UAACY,YAAY,EAACC;QAAC,CAAC,GAAC,MAAMjB,CAAC,CAACd,CAAC,CAAC;QAACS,CAAC,EAAEuB,UAAU,GAAG;UAACL,IAAI,EAACnB,CAAC;UAACoB,SAAS,EAACZ,CAAC;UAACa,uBAAuB,EAACX,CAAC;UAACe,WAAW,EAAC,SAAS;UAACH,YAAY,EAACC;QAAC,CAAC,CAAC;MAAA,CAAC,QAAM/B,CAAC,EAAC;QAAC,MAAMkB,CAAC,CAAC;UAACE,MAAM,EAAC,OAAO;UAACC,KAAK,EAACrB;QAAC,CAAC,CAAC,EAACS,CAAC,EAAEyB,OAAO,GAAGlC,CAAC,CAACmC,cAAc,IAAEjC,CAAC,CAACkC,kBAAkB,CAAC,EAACpC,CAAC;MAAA;IAAC,CAAC,EAAE,CAACc,CAAC,EAACJ,CAAC,CAACU,MAAM,CAAC,CAAC;IAACiB,KAAK,EAACrB;EAAC,CAAC;AAAA,CAAC;AAAC,SAAOP,CAAC,IAAI6B,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}