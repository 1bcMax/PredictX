{"ast":null,"code":"import { ofetch as o } from \"ofetch\";\nimport { useState as n, useRef as t, useEffect as e } from \"react\";\nimport { MOONPAY_API_URL_SANDBOX as r, MOONPAY_API_URL as i, MOONPAY_PUBLIC_KEY_SANDBOX as s, MOONPAY_PUBLIC_KEY as a } from \"../../../constants.mjs\";\nimport { usePrivyInternal as c } from \"../../../hooks/internal-context.mjs\";\nimport { usePrivyModal as m } from \"../../../hooks/modal-context.mjs\";\nimport { ModalScreen as p } from \"../../../screens/index.mjs\";\nimport { ON_RAMP_COMPLETE_ANALYTICS_EVENT as u } from \"../analytics.mjs\";\nimport \"../../../hooks/index.mjs\";\nimport \"react/jsx-runtime\";\nimport \"../../../components/PrefetchedImage.mjs\";\nimport \"../../../configuration/context.mjs\";\nimport \"../../../config.mjs\";\nimport \"../../../configuration/defaultClientConfig.mjs\";\nimport \"../../../configuration/login-methods.mjs\";\nimport \"../../../configuration/wallets.mjs\";\nimport \"../../../connectors/chains/index.mjs\";\nimport \"../../../connectors/chains/arbitrum.mjs\";\nimport \"../../../connectors/chains/arbitrumSepolia.mjs\";\nimport \"../../../connectors/chains/avalanche.mjs\";\nimport \"../../../connectors/chains/avalancheFuji.mjs\";\nimport \"../../../connectors/chains/base.mjs\";\nimport \"../../../connectors/chains/baseSepolia.mjs\";\nimport \"../../../connectors/chains/berachainArtio.mjs\";\nimport \"../../../connectors/chains/celo.mjs\";\nimport \"../../../connectors/chains/celoAlfajores.mjs\";\nimport \"../../../connectors/chains/filecoin.mjs\";\nimport \"../../../connectors/chains/filecoinCalibration.mjs\";\nimport \"../../../connectors/chains/garnetHolesky.mjs\";\nimport \"../../../connectors/chains/holesky.mjs\";\nimport \"../../../connectors/chains/linea.mjs\";\nimport \"../../../connectors/chains/lineaTestnet.mjs\";\nimport \"../../../connectors/chains/lukso.mjs\";\nimport \"../../../connectors/chains/mainnet.mjs\";\nimport \"../../../connectors/chains/optimism.mjs\";\nimport \"../../../connectors/chains/optimismSepolia.mjs\";\nimport \"../../../connectors/chains/polygon.mjs\";\nimport \"../../../connectors/chains/polygonAmoy.mjs\";\nimport \"../../../connectors/chains/redstone.mjs\";\nimport \"../../../connectors/chains/sepolia.mjs\";\nimport \"../../../connectors/chains/zora.mjs\";\nimport \"../../../connectors/chains/zoraSepolia.mjs\";\nimport \"../../../connectors/chains/zoraTestnet.mjs\";\nimport \"../../../connectors/chains/utils.mjs\";\nimport \"../../solana/index.mjs\";\nimport \"../../../theme.mjs\";\nimport \"tinycolor2\";\nimport \"../../cybr53.mjs\";\nconst l = \"moonpay\";\nfunction h(o) {\n  return parseFloat(o);\n}\nfunction d(o) {\n  return !!o && void 0 !== o.config && void 0 !== o.provider;\n}\nfunction j(o) {\n  return !!o && (void 0 !== o.chain || void 0 !== o.amount);\n}\nasync function f(n, t) {\n  return o(`${t ? r : i}/transactions/ext/${n}`, {\n    query: {\n      apiKey: t ? s : a\n    }\n  });\n}\nfunction y(o, r = !1) {\n  let [i, s] = n(null),\n    {\n      createAnalyticsEvent: a\n    } = c(),\n    {\n      data: h,\n      navigate: d,\n      setModalData: j\n    } = m(),\n    y = h?.funding,\n    g = t(0);\n  return e(() => {\n    let n = setInterval(async () => {\n      if (o) try {\n        let [t] = await f(o, r),\n          e = \"waitingAuthorization\" === t.status && \"credit_debit_card\" === t.paymentMethod ? \"pending\" : t.status;\n        if ([\"failed\", \"completed\", \"awaitingAuthorization\"].includes(e) && (a({\n          eventName: u,\n          payload: {\n            status: e,\n            provider: l,\n            paymentMethod: t.paymentMethod,\n            cardPaymentType: t.cardPaymentType,\n            currency: t.currency?.code,\n            baseCurrencyAmount: t.baseCurrencyAmount,\n            quoteCurrencyAmount: t.quoteCurrencyAmount,\n            feeAmount: t.feeAmount,\n            extraFeeAmount: t.extraFeeAmount,\n            networkFeeAmount: t.networkFeeAmount,\n            isSandbox: r\n          }\n        }), clearInterval(n)), \"failed\" === e || \"serviceFailure\" === e) return j({\n          funding: {\n            ...y,\n            errorMessage: \"Something went wrong adding funds from Moonpay. Please try again or use another method to fund your wallet.\"\n          }\n        }), void d(p.FUNDING_METHOD_SELECTION_SCREEN);\n        s(e);\n      } catch (o) {\n        404 !== o.response?.status && (g.current += 1), g.current >= 3 && (a({\n          eventName: u,\n          payload: {\n            status: \"serviceFailure\",\n            provider: l\n          }\n        }), clearInterval(n), j({\n          funding: {\n            ...y,\n            errorMessage: \"Something went wrong adding funds from Moonpay. Please try again or use another method to fund your wallet.\"\n          }\n        }), d(p.FUNDING_METHOD_SELECTION_SCREEN));\n      }\n    }, 3e3);\n    return () => clearInterval(n);\n  }, [o, g]), i;\n}\nexport { l as MOONPAY_PROVIDER_ID, h as amountToMoonpayAmount, f as getMoonpayTransactionStatus, d as isLegacyMoonpayConfig, j as isNewFundWalletConfig, y as usePollMoonpayTransactionStatus };","map":{"version":3,"names":["ofetch","o","useState","n","useRef","t","useEffect","e","MOONPAY_API_URL_SANDBOX","r","MOONPAY_API_URL","i","MOONPAY_PUBLIC_KEY_SANDBOX","s","MOONPAY_PUBLIC_KEY","a","usePrivyInternal","c","usePrivyModal","m","ModalScreen","p","ON_RAMP_COMPLETE_ANALYTICS_EVENT","u","l","h","parseFloat","d","config","provider","j","chain","amount","f","query","apiKey","y","createAnalyticsEvent","data","navigate","setModalData","funding","g","setInterval","status","paymentMethod","includes","eventName","payload","cardPaymentType","currency","code","baseCurrencyAmount","quoteCurrencyAmount","feeAmount","extraFeeAmount","networkFeeAmount","isSandbox","clearInterval","errorMessage","FUNDING_METHOD_SELECTION_SCREEN","response","current","MOONPAY_PROVIDER_ID","amountToMoonpayAmount","getMoonpayTransactionStatus","isLegacyMoonpayConfig","isNewFundWalletConfig","usePollMoonpayTransactionStatus"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/lib/funding/moonpay/index.mjs"],"sourcesContent":["import{ofetch as o}from\"ofetch\";import{useState as n,useRef as t,useEffect as e}from\"react\";import{MOONPAY_API_URL_SANDBOX as r,MOONPAY_API_URL as i,MOONPAY_PUBLIC_KEY_SANDBOX as s,MOONPAY_PUBLIC_KEY as a}from\"../../../constants.mjs\";import{usePrivyInternal as c}from\"../../../hooks/internal-context.mjs\";import{usePrivyModal as m}from\"../../../hooks/modal-context.mjs\";import{ModalScreen as p}from\"../../../screens/index.mjs\";import{ON_RAMP_COMPLETE_ANALYTICS_EVENT as u}from\"../analytics.mjs\";import\"../../../hooks/index.mjs\";import\"react/jsx-runtime\";import\"../../../components/PrefetchedImage.mjs\";import\"../../../configuration/context.mjs\";import\"../../../config.mjs\";import\"../../../configuration/defaultClientConfig.mjs\";import\"../../../configuration/login-methods.mjs\";import\"../../../configuration/wallets.mjs\";import\"../../../connectors/chains/index.mjs\";import\"../../../connectors/chains/arbitrum.mjs\";import\"../../../connectors/chains/arbitrumSepolia.mjs\";import\"../../../connectors/chains/avalanche.mjs\";import\"../../../connectors/chains/avalancheFuji.mjs\";import\"../../../connectors/chains/base.mjs\";import\"../../../connectors/chains/baseSepolia.mjs\";import\"../../../connectors/chains/berachainArtio.mjs\";import\"../../../connectors/chains/celo.mjs\";import\"../../../connectors/chains/celoAlfajores.mjs\";import\"../../../connectors/chains/filecoin.mjs\";import\"../../../connectors/chains/filecoinCalibration.mjs\";import\"../../../connectors/chains/garnetHolesky.mjs\";import\"../../../connectors/chains/holesky.mjs\";import\"../../../connectors/chains/linea.mjs\";import\"../../../connectors/chains/lineaTestnet.mjs\";import\"../../../connectors/chains/lukso.mjs\";import\"../../../connectors/chains/mainnet.mjs\";import\"../../../connectors/chains/optimism.mjs\";import\"../../../connectors/chains/optimismSepolia.mjs\";import\"../../../connectors/chains/polygon.mjs\";import\"../../../connectors/chains/polygonAmoy.mjs\";import\"../../../connectors/chains/redstone.mjs\";import\"../../../connectors/chains/sepolia.mjs\";import\"../../../connectors/chains/zora.mjs\";import\"../../../connectors/chains/zoraSepolia.mjs\";import\"../../../connectors/chains/zoraTestnet.mjs\";import\"../../../connectors/chains/utils.mjs\";import\"../../solana/index.mjs\";import\"../../../theme.mjs\";import\"tinycolor2\";import\"../../cybr53.mjs\";const l=\"moonpay\";function h(o){return parseFloat(o)}function d(o){return!!o&&void 0!==o.config&&void 0!==o.provider}function j(o){return!!o&&(void 0!==o.chain||void 0!==o.amount)}async function f(n,t){return o(`${t?r:i}/transactions/ext/${n}`,{query:{apiKey:t?s:a}})}function y(o,r=!1){let[i,s]=n(null),{createAnalyticsEvent:a}=c(),{data:h,navigate:d,setModalData:j}=m(),y=h?.funding,g=t(0);return e((()=>{let n=setInterval((async()=>{if(o)try{let[t]=await f(o,r),e=\"waitingAuthorization\"===t.status&&\"credit_debit_card\"===t.paymentMethod?\"pending\":t.status;if([\"failed\",\"completed\",\"awaitingAuthorization\"].includes(e)&&(a({eventName:u,payload:{status:e,provider:l,paymentMethod:t.paymentMethod,cardPaymentType:t.cardPaymentType,currency:t.currency?.code,baseCurrencyAmount:t.baseCurrencyAmount,quoteCurrencyAmount:t.quoteCurrencyAmount,feeAmount:t.feeAmount,extraFeeAmount:t.extraFeeAmount,networkFeeAmount:t.networkFeeAmount,isSandbox:r}}),clearInterval(n)),\"failed\"===e||\"serviceFailure\"===e)return j({funding:{...y,errorMessage:\"Something went wrong adding funds from Moonpay. Please try again or use another method to fund your wallet.\"}}),void d(p.FUNDING_METHOD_SELECTION_SCREEN);s(e)}catch(o){404!==o.response?.status&&(g.current+=1),g.current>=3&&(a({eventName:u,payload:{status:\"serviceFailure\",provider:l}}),clearInterval(n),j({funding:{...y,errorMessage:\"Something went wrong adding funds from Moonpay. Please try again or use another method to fund your wallet.\"}}),d(p.FUNDING_METHOD_SELECTION_SCREEN))}}),3e3);return()=>clearInterval(n)}),[o,g]),i}export{l as MOONPAY_PROVIDER_ID,h as amountToMoonpayAmount,f as getMoonpayTransactionStatus,d as isLegacyMoonpayConfig,j as isNewFundWalletConfig,y as usePollMoonpayTransactionStatus};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}