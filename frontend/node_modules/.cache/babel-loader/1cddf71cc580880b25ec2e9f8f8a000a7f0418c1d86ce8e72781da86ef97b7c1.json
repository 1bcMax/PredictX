{"ast":null,"code":"import { ofetch as t } from \"ofetch\";\nimport { VERSION as e } from \"./constants.mjs\";\nimport { formatApiError as r, PrivyTimeoutError as s } from \"./errors.mjs\";\nimport { sessionsRefreshPath as i, recoverForkedSessionsPath as a, sessionsLogoutPath as n, analyticsEventsPath as o } from \"./paths.mjs\";\nlet c = [i, a, n, o];\nclass l {\n  async get(t, e) {\n    try {\n      return await this.baseFetch(t, e);\n    } catch (t) {\n      throw r(t);\n    }\n  }\n  async post(t, e, s) {\n    try {\n      return await this.baseFetch(t, {\n        method: \"POST\",\n        ...(e ? {\n          body: e\n        } : {}),\n        ...s\n      });\n    } catch (t) {\n      throw r(t);\n    }\n  }\n  async delete(t, e) {\n    try {\n      return await this.baseFetch(t, {\n        method: \"DELETE\",\n        ...e\n      });\n    } catch (t) {\n      throw r(t);\n    }\n  }\n  constructor({\n    appId: r,\n    appClientId: i,\n    client: a,\n    defaults: n\n  }) {\n    this.appId = r, this.appClientId = i, this.clientAnalyticsId = a.clientAnalyticsId, this.sdkVersion = e, this.client = a, this.defaults = n, this.fallbackApiUrl = a.fallbackApiUrl, this.baseFetch = t.create({\n      baseURL: this.defaults.baseURL,\n      timeout: this.defaults.timeout,\n      retry: 3,\n      retryDelay: 500,\n      retryStatusCodes: [408, 409, 425, 500, 502, 503, 504],\n      credentials: \"include\",\n      onRequest: async ({\n        request: t,\n        options: e\n      }) => {\n        let r = new Headers(e.headers);\n        r.set(\"privy-app-id\", this.appId), this.appClientId && r.set(\"privy-client-id\", this.appClientId), r.set(\"privy-ca-id\", this.clientAnalyticsId || \"\"), r.set(\"privy-client\", `react-auth:${this.sdkVersion}`);\n        let s = c.includes(t.toString());\n        if (!r.has(\"authorization\")) {\n          let t = await this.client.getAccessToken({\n            disableAutoRefresh: s\n          });\n          null !== t && r.set(\"authorization\", `Bearer ${t}`);\n        }\n        e.headers = r, e.retryDelay && \"number\" == typeof e.retryDelay && (e.retryDelay = 3 * e.retryDelay);\n      },\n      onRequestError: ({\n        error: t\n      }) => {\n        if (t instanceof DOMException && \"AbortError\" === t.name) throw new s();\n      }\n    });\n  }\n}\nexport { l as Http };","map":{"version":3,"names":["ofetch","t","VERSION","e","formatApiError","r","PrivyTimeoutError","s","sessionsRefreshPath","i","recoverForkedSessionsPath","a","sessionsLogoutPath","n","analyticsEventsPath","o","c","l","get","baseFetch","post","method","body","delete","constructor","appId","appClientId","client","defaults","clientAnalyticsId","sdkVersion","fallbackApiUrl","create","baseURL","timeout","retry","retryDelay","retryStatusCodes","credentials","onRequest","request","options","Headers","headers","set","includes","toString","has","getAccessToken","disableAutoRefresh","onRequestError","error","DOMException","name","Http"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/http.mjs"],"sourcesContent":["import{ofetch as t}from\"ofetch\";import{VERSION as e}from\"./constants.mjs\";import{formatApiError as r,PrivyTimeoutError as s}from\"./errors.mjs\";import{sessionsRefreshPath as i,recoverForkedSessionsPath as a,sessionsLogoutPath as n,analyticsEventsPath as o}from\"./paths.mjs\";let c=[i,a,n,o];class l{async get(t,e){try{return await this.baseFetch(t,e)}catch(t){throw r(t)}}async post(t,e,s){try{return await this.baseFetch(t,{method:\"POST\",...e?{body:e}:{},...s})}catch(t){throw r(t)}}async delete(t,e){try{return await this.baseFetch(t,{method:\"DELETE\",...e})}catch(t){throw r(t)}}constructor({appId:r,appClientId:i,client:a,defaults:n}){this.appId=r,this.appClientId=i,this.clientAnalyticsId=a.clientAnalyticsId,this.sdkVersion=e,this.client=a,this.defaults=n,this.fallbackApiUrl=a.fallbackApiUrl,this.baseFetch=t.create({baseURL:this.defaults.baseURL,timeout:this.defaults.timeout,retry:3,retryDelay:500,retryStatusCodes:[408,409,425,500,502,503,504],credentials:\"include\",onRequest:async({request:t,options:e})=>{let r=new Headers(e.headers);r.set(\"privy-app-id\",this.appId),this.appClientId&&r.set(\"privy-client-id\",this.appClientId),r.set(\"privy-ca-id\",this.clientAnalyticsId||\"\"),r.set(\"privy-client\",`react-auth:${this.sdkVersion}`);let s=c.includes(t.toString());if(!r.has(\"authorization\")){let t=await this.client.getAccessToken({disableAutoRefresh:s});null!==t&&r.set(\"authorization\",`Bearer ${t}`)}e.headers=r,e.retryDelay&&\"number\"==typeof e.retryDelay&&(e.retryDelay=3*e.retryDelay)},onRequestError:({error:t})=>{if(t instanceof DOMException&&\"AbortError\"===t.name)throw new s}})}}export{l as Http};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}