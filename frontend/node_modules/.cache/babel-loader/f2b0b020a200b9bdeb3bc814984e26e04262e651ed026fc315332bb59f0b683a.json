{"ast":null,"code":"import { useCallback as t } from \"react\";\nimport { PrivyErrorCode as r } from \"../errors.mjs\";\nimport { useCaptcha as e, CaptchaError as o } from \"./captcha-context.mjs\";\nimport { usePrivyInternal as i } from \"./internal-context.mjs\";\nimport \"ofetch\";\nimport \"react/jsx-runtime\";\nimport \"./index.mjs\";\nimport \"../utils/index.mjs\";\nimport \"../connectors/get-legacy-injected-providers.mjs\";\nimport \"../connectors/is-wallet-installed.mjs\";\nimport \"../utils/eth/getPublicClient.mjs\";\nimport \"viem\";\nconst s = s => {\n  let a = e(),\n    {\n      emailOtpState: n,\n      setEmailOtpState: l,\n      initLoginWithEmail: c,\n      loginWithCode: m\n    } = i();\n  return {\n    sendCode: t(async ({\n      email: t,\n      disableSignup: e\n    }) => {\n      try {\n        let i;\n        if (!t) throw Error(\"Email required to send OTP code\");\n        if (a.enabled && \"error\" === a.status) throw new o(a.error, null, r.CAPTCHA_FAILURE);\n        return a.enabled && \"success\" !== a.status && (a.execute(), i = await a.waitForResult()), await c({\n          email: t,\n          captchaToken: i,\n          disableSignup: e,\n          withPrivyUi: !1\n        });\n      } catch (t) {\n        throw l({\n          status: \"error\",\n          error: t\n        }), s?.onError?.(t.privyErrorCode || r.UNKNOWN_AUTH_ERROR), t;\n      }\n    }, [c]),\n    loginWithCode: t(async ({\n      code: t\n    }) => {\n      try {\n        if (a.enabled && \"error\" === a.status) throw new o(a.error, null, r.CAPTCHA_FAILURE);\n        let {\n          user: e,\n          isNewUser: i,\n          wasAlreadyAuthenticated: n,\n          linkedAccount: l\n        } = await m(t);\n        s?.onComplete?.({\n          user: e,\n          isNewUser: i,\n          wasAlreadyAuthenticated: n,\n          loginMethod: \"email\",\n          loginAccount: l\n        });\n      } catch (t) {\n        throw l({\n          status: \"error\",\n          error: t\n        }), s?.onError?.(t.privyErrorCode || r.UNKNOWN_AUTH_ERROR), t;\n      }\n    }, [m, a.status]),\n    state: n\n  };\n};\nexport { s as useLoginWithEmail };","map":{"version":3,"names":["useCallback","t","PrivyErrorCode","r","useCaptcha","e","CaptchaError","o","usePrivyInternal","i","s","a","emailOtpState","n","setEmailOtpState","l","initLoginWithEmail","c","loginWithCode","m","sendCode","email","disableSignup","Error","enabled","status","error","CAPTCHA_FAILURE","execute","waitForResult","captchaToken","withPrivyUi","onError","privyErrorCode","UNKNOWN_AUTH_ERROR","code","user","isNewUser","wasAlreadyAuthenticated","linkedAccount","onComplete","loginMethod","loginAccount","state","useLoginWithEmail"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/useLoginWithEmail.mjs"],"sourcesContent":["import{useCallback as t}from\"react\";import{PrivyErrorCode as r}from\"../errors.mjs\";import{useCaptcha as e,CaptchaError as o}from\"./captcha-context.mjs\";import{usePrivyInternal as i}from\"./internal-context.mjs\";import\"ofetch\";import\"react/jsx-runtime\";import\"./index.mjs\";import\"../utils/index.mjs\";import\"../connectors/get-legacy-injected-providers.mjs\";import\"../connectors/is-wallet-installed.mjs\";import\"../utils/eth/getPublicClient.mjs\";import\"viem\";const s=s=>{let a=e(),{emailOtpState:n,setEmailOtpState:l,initLoginWithEmail:c,loginWithCode:m}=i();return{sendCode:t((async({email:t,disableSignup:e})=>{try{let i;if(!t)throw Error(\"Email required to send OTP code\");if(a.enabled&&\"error\"===a.status)throw new o(a.error,null,r.CAPTCHA_FAILURE);return a.enabled&&\"success\"!==a.status&&(a.execute(),i=await a.waitForResult()),await c({email:t,captchaToken:i,disableSignup:e,withPrivyUi:!1})}catch(t){throw l({status:\"error\",error:t}),s?.onError?.(t.privyErrorCode||r.UNKNOWN_AUTH_ERROR),t}}),[c]),loginWithCode:t((async({code:t})=>{try{if(a.enabled&&\"error\"===a.status)throw new o(a.error,null,r.CAPTCHA_FAILURE);let{user:e,isNewUser:i,wasAlreadyAuthenticated:n,linkedAccount:l}=await m(t);s?.onComplete?.({user:e,isNewUser:i,wasAlreadyAuthenticated:n,loginMethod:\"email\",loginAccount:l})}catch(t){throw l({status:\"error\",error:t}),s?.onError?.(t.privyErrorCode||r.UNKNOWN_AUTH_ERROR),t}}),[m,a.status]),state:n}};export{s as useLoginWithEmail};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}