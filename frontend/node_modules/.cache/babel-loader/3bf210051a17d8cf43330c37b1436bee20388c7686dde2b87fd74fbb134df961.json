{"ast":null,"code":"import { useRef as e, useCallback as r } from \"react\";\nimport { getPrivySolanaWallet as t, getPrivyEthereumWallet as o } from \"../client/user.mjs\";\nimport { WALLET_PROXY_TIMEOUT as a } from \"../constants.mjs\";\nimport { usePrivyInternal as s } from \"./internal-context.mjs\";\nimport { usePrivyContext as i } from \"./privy-context.mjs\";\nimport \"viem/utils\";\nimport \"./index.mjs\";\nfunction d() {\n  let {\n      getAccessToken: d\n    } = i(),\n    {\n      refreshSessionAndUser: n,\n      createAnalyticsEvent: l,\n      initializeWalletProxy: c\n    } = s(),\n    m = e(!1);\n  return {\n    createWallet: r(async ({\n      user: e,\n      recoveryPassword: r\n    }) => {\n      let s = await d();\n      if (!s) throw l({\n        eventName: \"embedded_wallet_creation_failed\",\n        payload: {\n          error: \"Missing access token for user.\"\n        }\n      }), Error(\"An error has occured, please login again.\");\n      try {\n        l({\n          eventName: \"embedded_wallet_creation_started\"\n        });\n        let i = await c(a);\n        if (!i) throw Error(\"walletProxy does not exist.\");\n        let d = new Promise((e, r) => {\n            setTimeout(() => {\n              r(Error(\"walletProxy.create timed out.\"));\n            }, 2e4);\n          }),\n          w = t(e);\n        if (!(await Promise.race([i.create({\n          accessToken: s,\n          recoveryPassword: r,\n          recoveryMethod: r ? \"user-passcode\" : void 0,\n          solanaAddress: w?.address\n        }), d]))) throw Error(\"walletProxy.create did not send a response.\");\n        let f = await n();\n        if (!f) throw Error(\"Failed to refresh user.\");\n        let p = o(f);\n        if (!p) throw Error(\"Updated user is missing embedded wallet.\");\n        return l({\n          eventName: \"embedded_wallet_creation_completed\",\n          payload: {\n            walletAddress: p.address\n          }\n        }), m.current = !0, p;\n      } catch (e) {\n        if (m.current) return;\n        throw l({\n          eventName: \"embedded_wallet_creation_failed\",\n          payload: {\n            error: e.toString()\n          }\n        }), console.warn(e), e;\n      }\n    }, [])\n  };\n}\nexport { d as useCreateWallet };","map":{"version":3,"names":["useRef","e","useCallback","r","getPrivySolanaWallet","t","getPrivyEthereumWallet","o","WALLET_PROXY_TIMEOUT","a","usePrivyInternal","s","usePrivyContext","i","d","getAccessToken","refreshSessionAndUser","n","createAnalyticsEvent","l","initializeWalletProxy","c","m","createWallet","user","recoveryPassword","eventName","payload","error","Error","Promise","setTimeout","w","race","create","accessToken","recoveryMethod","solanaAddress","address","f","p","walletAddress","current","toString","console","warn","useCreateWallet"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/useEmbeddedWalletCreate.mjs"],"sourcesContent":["import{useRef as e,useCallback as r}from\"react\";import{getPrivySolanaWallet as t,getPrivyEthereumWallet as o}from\"../client/user.mjs\";import{WALLET_PROXY_TIMEOUT as a}from\"../constants.mjs\";import{usePrivyInternal as s}from\"./internal-context.mjs\";import{usePrivyContext as i}from\"./privy-context.mjs\";import\"viem/utils\";import\"./index.mjs\";function d(){let{getAccessToken:d}=i(),{refreshSessionAndUser:n,createAnalyticsEvent:l,initializeWalletProxy:c}=s(),m=e(!1);return{createWallet:r((async({user:e,recoveryPassword:r})=>{let s=await d();if(!s)throw l({eventName:\"embedded_wallet_creation_failed\",payload:{error:\"Missing access token for user.\"}}),Error(\"An error has occured, please login again.\");try{l({eventName:\"embedded_wallet_creation_started\"});let i=await c(a);if(!i)throw Error(\"walletProxy does not exist.\");let d=new Promise(((e,r)=>{setTimeout((()=>{r(Error(\"walletProxy.create timed out.\"))}),2e4)})),w=t(e);if(!await Promise.race([i.create({accessToken:s,recoveryPassword:r,recoveryMethod:r?\"user-passcode\":void 0,solanaAddress:w?.address}),d]))throw Error(\"walletProxy.create did not send a response.\");let f=await n();if(!f)throw Error(\"Failed to refresh user.\");let p=o(f);if(!p)throw Error(\"Updated user is missing embedded wallet.\");return l({eventName:\"embedded_wallet_creation_completed\",payload:{walletAddress:p.address}}),m.current=!0,p}catch(e){if(m.current)return;throw l({eventName:\"embedded_wallet_creation_failed\",payload:{error:e.toString()}}),console.warn(e),e}}),[])}}export{d as useCreateWallet};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}