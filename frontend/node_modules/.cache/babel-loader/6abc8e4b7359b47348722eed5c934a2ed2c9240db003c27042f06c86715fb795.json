{"ast":null,"code":"import { useCallback as e } from \"react\";\nimport { PrivyErrorCode as t } from \"../errors.mjs\";\nimport { useCaptcha as r, CaptchaError as i } from \"./captcha-context.mjs\";\nimport { usePrivyInternal as o } from \"./internal-context.mjs\";\nimport \"ofetch\";\nimport \"react/jsx-runtime\";\nimport \"./index.mjs\";\nimport \"../utils/index.mjs\";\nimport \"../connectors/get-legacy-injected-providers.mjs\";\nimport \"../connectors/is-wallet-installed.mjs\";\nimport \"../utils/eth/getPublicClient.mjs\";\nimport \"viem\";\nconst s = s => {\n  let n = r(),\n    {\n      siweState: a,\n      setSiweState: c,\n      linkWithSiwe: l,\n      generateSiweMessage: m\n    } = o();\n  return {\n    generateSiweMessage: e(async ({\n      address: e,\n      chainId: r\n    }) => {\n      try {\n        if (!e || !r) throw Error(\"wallet address and chainId required to generate nonce\");\n        return await m({\n          address: e,\n          chainId: r\n        }).then(e => e);\n      } catch (e) {\n        throw c({\n          status: \"error\",\n          error: e\n        }), s?.onError?.(e.privyErrorCode || t.UNKNOWN_AUTH_ERROR, {\n          linkMethod: \"siwe\"\n        }), e;\n      }\n    }, [m]),\n    linkWithSiwe: e(async ({\n      signature: e,\n      message: r,\n      chainId: o,\n      walletClientType: a,\n      connectorType: m\n    }) => {\n      try {\n        if (n.enabled && \"success\" !== n.status) throw new i(n.error, null, t.CAPTCHA_FAILURE);\n        let {\n          user: c,\n          linkedAccount: d\n        } = await l({\n          message: r,\n          signature: e,\n          chainId: o,\n          walletClientType: a,\n          connectorType: m\n        });\n        d && s?.onSuccess?.({\n          user: c,\n          linkMethod: \"siwe\",\n          linkedAccount: d\n        });\n      } catch (e) {\n        throw c({\n          status: \"error\",\n          error: e\n        }), s?.onError?.(e.privyErrorCode || t.UNKNOWN_AUTH_ERROR, {\n          linkMethod: \"siwe\"\n        }), e;\n      }\n    }, [l, n.status]),\n    state: a\n  };\n};\nexport { s as useLinkWithSiwe };","map":{"version":3,"names":["useCallback","e","PrivyErrorCode","t","useCaptcha","r","CaptchaError","i","usePrivyInternal","o","s","n","siweState","a","setSiweState","c","linkWithSiwe","l","generateSiweMessage","m","address","chainId","Error","then","status","error","onError","privyErrorCode","UNKNOWN_AUTH_ERROR","linkMethod","signature","message","walletClientType","connectorType","enabled","CAPTCHA_FAILURE","user","linkedAccount","d","onSuccess","state","useLinkWithSiwe"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/useLinkWithSiwe.mjs"],"sourcesContent":["import{useCallback as e}from\"react\";import{PrivyErrorCode as t}from\"../errors.mjs\";import{useCaptcha as r,CaptchaError as i}from\"./captcha-context.mjs\";import{usePrivyInternal as o}from\"./internal-context.mjs\";import\"ofetch\";import\"react/jsx-runtime\";import\"./index.mjs\";import\"../utils/index.mjs\";import\"../connectors/get-legacy-injected-providers.mjs\";import\"../connectors/is-wallet-installed.mjs\";import\"../utils/eth/getPublicClient.mjs\";import\"viem\";const s=s=>{let n=r(),{siweState:a,setSiweState:c,linkWithSiwe:l,generateSiweMessage:m}=o();return{generateSiweMessage:e((async({address:e,chainId:r})=>{try{if(!e||!r)throw Error(\"wallet address and chainId required to generate nonce\");return await m({address:e,chainId:r}).then((e=>e))}catch(e){throw c({status:\"error\",error:e}),s?.onError?.(e.privyErrorCode||t.UNKNOWN_AUTH_ERROR,{linkMethod:\"siwe\"}),e}}),[m]),linkWithSiwe:e((async({signature:e,message:r,chainId:o,walletClientType:a,connectorType:m})=>{try{if(n.enabled&&\"success\"!==n.status)throw new i(n.error,null,t.CAPTCHA_FAILURE);let{user:c,linkedAccount:d}=await l({message:r,signature:e,chainId:o,walletClientType:a,connectorType:m});d&&s?.onSuccess?.({user:c,linkMethod:\"siwe\",linkedAccount:d})}catch(e){throw c({status:\"error\",error:e}),s?.onError?.(e.privyErrorCode||t.UNKNOWN_AUTH_ERROR,{linkMethod:\"siwe\"}),e}}),[l,n.status]),state:a}};export{s as useLinkWithSiwe};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}