{"ast":null,"code":"import { RecoveryOAuthInit as t, RecoveryOAuthAuthenticate as e } from \"@privy-io/public-api\";\nimport { PrivyClientError as r } from \"../../Error.mjs\";\nimport { createCodeVerifier as i, createStateCode as a, deriveCodeChallengeFromCodeVerifier as o, CODE_VERIFIER_KEY as s, STATE_CODE_KEY as c } from \"../../pkce.mjs\";\nimport \"jose\";\nclass h {\n  async generateURL(e) {\n    let r = i(),\n      h = a(),\n      _ = await o({\n        codeVerifier: r,\n        digest: this._crypto?.digest\n      });\n    return await Promise.all([this._storage.put(s, r), this._storage.put(c, h)]), this._privyInternal.fetch(t, {\n      body: {\n        redirect_to: e,\n        code_challenge: _,\n        state_code: h\n      }\n    });\n  }\n  async authorize(t, i) {\n    let [a, o] = await Promise.all([this._storage.get(s), this._storage.get(c)]);\n    if (o !== i) throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\", {\n      flow: \"recovery_oauth\",\n      storedStateCode: o ?? \"\",\n      returnedStateCode: i ?? \"\"\n    }), new r({\n      code: \"pkce_state_code_mismatch\",\n      error: \"Unexpected auth flow. This may be a phishing attempt.\"\n    });\n    let h = await this._privyInternal.fetch(e, {\n      body: {\n        authorization_code: t,\n        state_code: o,\n        code_verifier: a\n      }\n    });\n    return await Promise.all([this._storage.del(s), this._storage.del(c)]), h;\n  }\n  constructor(t, e, r) {\n    this._privyInternal = t, this._storage = e, this._crypto = r;\n  }\n}\nexport { h as default };","map":{"version":3,"names":["RecoveryOAuthInit","t","RecoveryOAuthAuthenticate","e","PrivyClientError","r","createCodeVerifier","i","createStateCode","a","deriveCodeChallengeFromCodeVerifier","o","CODE_VERIFIER_KEY","s","STATE_CODE_KEY","c","h","generateURL","_","codeVerifier","digest","_crypto","Promise","all","_storage","put","_privyInternal","fetch","body","redirect_to","code_challenge","state_code","authorize","get","createAnalyticsEvent","flow","storedStateCode","returnedStateCode","code","error","authorization_code","code_verifier","del","constructor","default"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/node_modules/@privy-io/js-sdk-core/dist/esm/client/recovery/RecoveryOAuthApi.mjs"],"sourcesContent":["import{RecoveryOAuthInit as t,RecoveryOAuthAuthenticate as e}from\"@privy-io/public-api\";import{PrivyClientError as r}from\"../../Error.mjs\";import{createCodeVerifier as i,createStateCode as a,deriveCodeChallengeFromCodeVerifier as o,CODE_VERIFIER_KEY as s,STATE_CODE_KEY as c}from\"../../pkce.mjs\";import\"jose\";class h{async generateURL(e){let r=i(),h=a(),_=await o({codeVerifier:r,digest:this._crypto?.digest});return await Promise.all([this._storage.put(s,r),this._storage.put(c,h)]),this._privyInternal.fetch(t,{body:{redirect_to:e,code_challenge:_,state_code:h}})}async authorize(t,i){let[a,o]=await Promise.all([this._storage.get(s),this._storage.get(c)]);if(o!==i)throw this._privyInternal.createAnalyticsEvent(\"possible_phishing_attempt\",{flow:\"recovery_oauth\",storedStateCode:o??\"\",returnedStateCode:i??\"\"}),new r({code:\"pkce_state_code_mismatch\",error:\"Unexpected auth flow. This may be a phishing attempt.\"});let h=await this._privyInternal.fetch(e,{body:{authorization_code:t,state_code:o,code_verifier:a}});return await Promise.all([this._storage.del(s),this._storage.del(c)]),h}constructor(t,e,r){this._privyInternal=t,this._storage=e,this._crypto=r}}export{h as default};\n"],"mappings":"AAAA,SAAOA,iBAAiB,IAAIC,CAAC,EAACC,yBAAyB,IAAIC,CAAC,QAAK,sBAAsB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,iBAAiB;AAAC,SAAOC,kBAAkB,IAAIC,CAAC,EAACC,eAAe,IAAIC,CAAC,EAACC,mCAAmC,IAAIC,CAAC,EAACC,iBAAiB,IAAIC,CAAC,EAACC,cAAc,IAAIC,CAAC,QAAK,gBAAgB;AAAC,OAAM,MAAM;AAAC,MAAMC,CAAC;EAAC,MAAMC,WAAWA,CAACd,CAAC,EAAC;IAAC,IAAIE,CAAC,GAACE,CAAC,CAAC,CAAC;MAACS,CAAC,GAACP,CAAC,CAAC,CAAC;MAACS,CAAC,GAAC,MAAMP,CAAC,CAAC;QAACQ,YAAY,EAACd,CAAC;QAACe,MAAM,EAAC,IAAI,CAACC,OAAO,EAAED;MAAM,CAAC,CAAC;IAAC,OAAO,MAAME,OAAO,CAACC,GAAG,CAAC,CAAC,IAAI,CAACC,QAAQ,CAACC,GAAG,CAACZ,CAAC,EAACR,CAAC,CAAC,EAAC,IAAI,CAACmB,QAAQ,CAACC,GAAG,CAACV,CAAC,EAACC,CAAC,CAAC,CAAC,CAAC,EAAC,IAAI,CAACU,cAAc,CAACC,KAAK,CAAC1B,CAAC,EAAC;MAAC2B,IAAI,EAAC;QAACC,WAAW,EAAC1B,CAAC;QAAC2B,cAAc,EAACZ,CAAC;QAACa,UAAU,EAACf;MAAC;IAAC,CAAC,CAAC;EAAA;EAAC,MAAMgB,SAASA,CAAC/B,CAAC,EAACM,CAAC,EAAC;IAAC,IAAG,CAACE,CAAC,EAACE,CAAC,CAAC,GAAC,MAAMW,OAAO,CAACC,GAAG,CAAC,CAAC,IAAI,CAACC,QAAQ,CAACS,GAAG,CAACpB,CAAC,CAAC,EAAC,IAAI,CAACW,QAAQ,CAACS,GAAG,CAAClB,CAAC,CAAC,CAAC,CAAC;IAAC,IAAGJ,CAAC,KAAGJ,CAAC,EAAC,MAAM,IAAI,CAACmB,cAAc,CAACQ,oBAAoB,CAAC,2BAA2B,EAAC;MAACC,IAAI,EAAC,gBAAgB;MAACC,eAAe,EAACzB,CAAC,IAAE,EAAE;MAAC0B,iBAAiB,EAAC9B,CAAC,IAAE;IAAE,CAAC,CAAC,EAAC,IAAIF,CAAC,CAAC;MAACiC,IAAI,EAAC,0BAA0B;MAACC,KAAK,EAAC;IAAuD,CAAC,CAAC;IAAC,IAAIvB,CAAC,GAAC,MAAM,IAAI,CAACU,cAAc,CAACC,KAAK,CAACxB,CAAC,EAAC;MAACyB,IAAI,EAAC;QAACY,kBAAkB,EAACvC,CAAC;QAAC8B,UAAU,EAACpB,CAAC;QAAC8B,aAAa,EAAChC;MAAC;IAAC,CAAC,CAAC;IAAC,OAAO,MAAMa,OAAO,CAACC,GAAG,CAAC,CAAC,IAAI,CAACC,QAAQ,CAACkB,GAAG,CAAC7B,CAAC,CAAC,EAAC,IAAI,CAACW,QAAQ,CAACkB,GAAG,CAAC3B,CAAC,CAAC,CAAC,CAAC,EAACC,CAAC;EAAA;EAAC2B,WAAWA,CAAC1C,CAAC,EAACE,CAAC,EAACE,CAAC,EAAC;IAAC,IAAI,CAACqB,cAAc,GAACzB,CAAC,EAAC,IAAI,CAACuB,QAAQ,GAACrB,CAAC,EAAC,IAAI,CAACkB,OAAO,GAAChB,CAAC;EAAA;AAAC;AAAC,SAAOW,CAAC,IAAI4B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}