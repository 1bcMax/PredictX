{"ast":null,"code":"import { USE_BROADCAST_CHANNEL_EVENT_TYPE as e, CROSS_APP_BROADCAST_CHANNEL_NAME as t } from \"./index.mjs\";\nimport { PrivyClientError as a } from \"../../errors.mjs\";\nimport \"ofetch\";\nasync function o({\n  url: o,\n  popup: r\n}) {\n  return r.location = o, new Promise((o, n) => {\n    let i,\n      s = setTimeout(() => {\n        n(new a(\"Authorization request timed out after 2 minutes.\")), d();\n      }, 12e4);\n    function d() {\n      r?.close(), window.removeEventListener(\"message\", u);\n    }\n    let m = setInterval(() => {\n      r?.closed && !i && (d(), clearInterval(m), clearTimeout(s), n(new a(\"User rejected request\")));\n    }, 300);\n    function u(r) {\n      r.data && (\"PRIVY_OAUTH_RESPONSE\" === r.data.type && r.data.stateCode && r.data.authorizationCode && (clearTimeout(s), o(r.data), d()), \"PRIVY_OAUTH_ERROR\" === r.data.type && (clearTimeout(s), n(new a(r.data.error)), d()), r.data.type === e && ((i = new BroadcastChannel(t)).onmessage = u));\n    }\n    window.addEventListener(\"message\", u);\n  });\n}\nexport { o as popupCrossAppAuthFlow };","map":{"version":3,"names":["USE_BROADCAST_CHANNEL_EVENT_TYPE","e","CROSS_APP_BROADCAST_CHANNEL_NAME","t","PrivyClientError","a","o","url","popup","r","location","Promise","n","i","s","setTimeout","d","close","window","removeEventListener","u","m","setInterval","closed","clearInterval","clearTimeout","data","type","stateCode","authorizationCode","error","BroadcastChannel","onmessage","addEventListener","popupCrossAppAuthFlow"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/lib/cross-app/popupCrossAppAuthFlow.mjs"],"sourcesContent":["import{USE_BROADCAST_CHANNEL_EVENT_TYPE as e,CROSS_APP_BROADCAST_CHANNEL_NAME as t}from\"./index.mjs\";import{PrivyClientError as a}from\"../../errors.mjs\";import\"ofetch\";async function o({url:o,popup:r}){return r.location=o,new Promise(((o,n)=>{let i,s=setTimeout((()=>{n(new a(\"Authorization request timed out after 2 minutes.\")),d()}),12e4);function d(){r?.close(),window.removeEventListener(\"message\",u)}let m=setInterval((()=>{r?.closed&&!i&&(d(),clearInterval(m),clearTimeout(s),n(new a(\"User rejected request\")))}),300);function u(r){r.data&&(\"PRIVY_OAUTH_RESPONSE\"===r.data.type&&r.data.stateCode&&r.data.authorizationCode&&(clearTimeout(s),o(r.data),d()),\"PRIVY_OAUTH_ERROR\"===r.data.type&&(clearTimeout(s),n(new a(r.data.error)),d()),r.data.type===e&&((i=new BroadcastChannel(t)).onmessage=u))}window.addEventListener(\"message\",u)}))}export{o as popupCrossAppAuthFlow};\n"],"mappings":"AAAA,SAAOA,gCAAgC,IAAIC,CAAC,EAACC,gCAAgC,IAAIC,CAAC,QAAK,aAAa;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,kBAAkB;AAAC,OAAM,QAAQ;AAAC,eAAeC,CAACA,CAAC;EAACC,GAAG,EAACD,CAAC;EAACE,KAAK,EAACC;AAAC,CAAC,EAAC;EAAC,OAAOA,CAAC,CAACC,QAAQ,GAACJ,CAAC,EAAC,IAAIK,OAAO,CAAE,CAACL,CAAC,EAACM,CAAC,KAAG;IAAC,IAAIC,CAAC;MAACC,CAAC,GAACC,UAAU,CAAE,MAAI;QAACH,CAAC,CAAC,IAAIP,CAAC,CAAC,kDAAkD,CAAC,CAAC,EAACW,CAAC,CAAC,CAAC;MAAA,CAAC,EAAE,IAAI,CAAC;IAAC,SAASA,CAACA,CAAA,EAAE;MAACP,CAAC,EAAEQ,KAAK,CAAC,CAAC,EAACC,MAAM,CAACC,mBAAmB,CAAC,SAAS,EAACC,CAAC,CAAC;IAAA;IAAC,IAAIC,CAAC,GAACC,WAAW,CAAE,MAAI;MAACb,CAAC,EAAEc,MAAM,IAAE,CAACV,CAAC,KAAGG,CAAC,CAAC,CAAC,EAACQ,aAAa,CAACH,CAAC,CAAC,EAACI,YAAY,CAACX,CAAC,CAAC,EAACF,CAAC,CAAC,IAAIP,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;IAAA,CAAC,EAAE,GAAG,CAAC;IAAC,SAASe,CAACA,CAACX,CAAC,EAAC;MAACA,CAAC,CAACiB,IAAI,KAAG,sBAAsB,KAAGjB,CAAC,CAACiB,IAAI,CAACC,IAAI,IAAElB,CAAC,CAACiB,IAAI,CAACE,SAAS,IAAEnB,CAAC,CAACiB,IAAI,CAACG,iBAAiB,KAAGJ,YAAY,CAACX,CAAC,CAAC,EAACR,CAAC,CAACG,CAAC,CAACiB,IAAI,CAAC,EAACV,CAAC,CAAC,CAAC,CAAC,EAAC,mBAAmB,KAAGP,CAAC,CAACiB,IAAI,CAACC,IAAI,KAAGF,YAAY,CAACX,CAAC,CAAC,EAACF,CAAC,CAAC,IAAIP,CAAC,CAACI,CAAC,CAACiB,IAAI,CAACI,KAAK,CAAC,CAAC,EAACd,CAAC,CAAC,CAAC,CAAC,EAACP,CAAC,CAACiB,IAAI,CAACC,IAAI,KAAG1B,CAAC,KAAG,CAACY,CAAC,GAAC,IAAIkB,gBAAgB,CAAC5B,CAAC,CAAC,EAAE6B,SAAS,GAACZ,CAAC,CAAC,CAAC;IAAA;IAACF,MAAM,CAACe,gBAAgB,CAAC,SAAS,EAACb,CAAC,CAAC;EAAA,CAAE,CAAC;AAAA;AAAC,SAAOd,CAAC,IAAI4B,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}