{"ast":null,"code":"import { PrivyClientError as e, formatApiError as t } from \"../errors.mjs\";\nimport { passwordlessSmsAuthenticatePath as o, passwordlessSmsLinkPath as n, passwordlessSmsInitPath as h, updatePhonePath as a } from \"../paths.mjs\";\nimport { getUiHeader as s } from \"./getUiHeader.mjs\";\nimport \"ofetch\";\nclass i {\n  async authenticate() {\n    if (!this.api) throw new e(\"Auth flow has no API instance\");\n    if (!this.meta.phoneNumber || !this.meta.smsCode) throw new e(\"phone number and sms code must be set prior to calling authenticate.\");\n    try {\n      return await this.api.post(o, {\n        phoneNumber: this.meta.phoneNumber,\n        code: this.meta.smsCode,\n        mode: this.meta.disableSignup ? \"no-signup\" : \"login-or-sign-up\"\n      });\n    } catch (e) {\n      throw t(e);\n    }\n  }\n  async link() {\n    if (!this.api) throw new e(\"Auth flow has no API instance\");\n    if (!this.meta.phoneNumber || !this.meta.smsCode) throw new e(\"phone number and sms code must be set prior to calling authenticate.\");\n    try {\n      return await this.api.post(n, {\n        phoneNumber: this.meta.phoneNumber,\n        code: this.meta.smsCode\n      });\n    } catch (e) {\n      throw t(e);\n    }\n  }\n  async sendSmsCode({\n    phoneNumber: o,\n    captchaToken: n,\n    withPrivyUi: a\n  }) {\n    if (!this.api) throw new e(\"Auth flow has no API instance\");\n    if (o && (this.meta.phoneNumber = o), n && (this.meta.captchaToken = n), !this.meta.phoneNumber) throw new e(\"phone nNumber must be set when initialzing authentication.\");\n    let i = s(a);\n    try {\n      return await this.api.post(h, {\n        phoneNumber: this.meta.phoneNumber,\n        token: this.meta.captchaToken\n      }, {\n        headers: {\n          ...i\n        }\n      });\n    } catch (e) {\n      throw t(e);\n    }\n  }\n  constructor({\n    phoneNumber: e,\n    captchaToken: t,\n    disableSignup: o\n  }) {\n    this.meta = {\n      phoneNumber: e,\n      captchaToken: t,\n      disableSignup: o ?? !1\n    };\n  }\n}\nclass r extends i {\n  async link() {\n    if (!this.api) throw new e(\"Auth flow has no API instance\");\n    if (!this.meta.phoneNumber || !this.meta.smsCode || !this.meta.oldPhoneNumber) throw new e(\"Phone number, sms code, and an old phone number must be set prior to calling update.\");\n    try {\n      return await this.api.post(a, {\n        old_phone_number: this.meta.oldPhoneNumber,\n        new_phone_number: this.meta.phoneNumber,\n        code: this.meta.smsCode\n      });\n    } catch (e) {\n      throw t(e);\n    }\n  }\n  constructor(e, t, o) {\n    super({\n      phoneNumber: t,\n      captchaToken: o\n    }), this.meta = {\n      phoneNumber: t,\n      captchaToken: o,\n      oldPhoneNumber: e,\n      disableSignup: !1\n    };\n  }\n}\nexport { i as SmsFlow, r as UpdateSmsFlow };","map":{"version":3,"names":["PrivyClientError","e","formatApiError","t","passwordlessSmsAuthenticatePath","o","passwordlessSmsLinkPath","n","passwordlessSmsInitPath","h","updatePhonePath","a","getUiHeader","s","i","authenticate","api","meta","phoneNumber","smsCode","post","code","mode","disableSignup","link","sendSmsCode","captchaToken","withPrivyUi","token","headers","constructor","r","oldPhoneNumber","old_phone_number","new_phone_number","SmsFlow","UpdateSmsFlow"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/auth-flows/sms.mjs"],"sourcesContent":["import{PrivyClientError as e,formatApiError as t}from\"../errors.mjs\";import{passwordlessSmsAuthenticatePath as o,passwordlessSmsLinkPath as n,passwordlessSmsInitPath as h,updatePhonePath as a}from\"../paths.mjs\";import{getUiHeader as s}from\"./getUiHeader.mjs\";import\"ofetch\";class i{async authenticate(){if(!this.api)throw new e(\"Auth flow has no API instance\");if(!this.meta.phoneNumber||!this.meta.smsCode)throw new e(\"phone number and sms code must be set prior to calling authenticate.\");try{return await this.api.post(o,{phoneNumber:this.meta.phoneNumber,code:this.meta.smsCode,mode:this.meta.disableSignup?\"no-signup\":\"login-or-sign-up\"})}catch(e){throw t(e)}}async link(){if(!this.api)throw new e(\"Auth flow has no API instance\");if(!this.meta.phoneNumber||!this.meta.smsCode)throw new e(\"phone number and sms code must be set prior to calling authenticate.\");try{return await this.api.post(n,{phoneNumber:this.meta.phoneNumber,code:this.meta.smsCode})}catch(e){throw t(e)}}async sendSmsCode({phoneNumber:o,captchaToken:n,withPrivyUi:a}){if(!this.api)throw new e(\"Auth flow has no API instance\");if(o&&(this.meta.phoneNumber=o),n&&(this.meta.captchaToken=n),!this.meta.phoneNumber)throw new e(\"phone nNumber must be set when initialzing authentication.\");let i=s(a);try{return await this.api.post(h,{phoneNumber:this.meta.phoneNumber,token:this.meta.captchaToken},{headers:{...i}})}catch(e){throw t(e)}}constructor({phoneNumber:e,captchaToken:t,disableSignup:o}){this.meta={phoneNumber:e,captchaToken:t,disableSignup:o??!1}}}class r extends i{async link(){if(!this.api)throw new e(\"Auth flow has no API instance\");if(!this.meta.phoneNumber||!this.meta.smsCode||!this.meta.oldPhoneNumber)throw new e(\"Phone number, sms code, and an old phone number must be set prior to calling update.\");try{return await this.api.post(a,{old_phone_number:this.meta.oldPhoneNumber,new_phone_number:this.meta.phoneNumber,code:this.meta.smsCode})}catch(e){throw t(e)}}constructor(e,t,o){super({phoneNumber:t,captchaToken:o}),this.meta={phoneNumber:t,captchaToken:o,oldPhoneNumber:e,disableSignup:!1}}}export{i as SmsFlow,r as UpdateSmsFlow};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}