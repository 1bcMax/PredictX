{"ast":null,"code":"import { useCallback as t } from \"react\";\nimport { PrivyErrorCode as r } from \"../errors.mjs\";\nimport { useCaptcha as e, CaptchaError as o } from \"./captcha-context.mjs\";\nimport { usePrivyInternal as s } from \"./internal-context.mjs\";\nimport \"ofetch\";\nimport \"react/jsx-runtime\";\nimport \"./index.mjs\";\nimport \"../utils/index.mjs\";\nimport \"../connectors/get-legacy-injected-providers.mjs\";\nimport \"../connectors/is-wallet-installed.mjs\";\nimport \"../utils/eth/getPublicClient.mjs\";\nimport \"viem\";\nconst i = i => {\n  let n = e(),\n    {\n      smsOtpState: a,\n      setSmsOtpState: c,\n      initLoginWithSms: m,\n      loginWithCode: l\n    } = s();\n  return {\n    sendCode: t(async ({\n      phoneNumber: t,\n      disableSignup: e\n    }) => {\n      try {\n        let s;\n        if (!t) throw Error(\"SMS required to send OTP code\");\n        if (n.enabled && \"error\" === n.status) throw new o(n.error, null, r.CAPTCHA_FAILURE);\n        return n.enabled && \"success\" !== n.status && (n.execute(), s = await n.waitForResult()), await m({\n          phoneNumber: t,\n          captchaToken: s,\n          disableSignup: e,\n          withPrivyUi: !1\n        });\n      } catch (t) {\n        throw c({\n          status: \"error\",\n          error: t\n        }), i?.onError?.(t.privyErrorCode || r.UNKNOWN_AUTH_ERROR), t;\n      }\n    }, [m]),\n    loginWithCode: t(async ({\n      code: t\n    }) => {\n      try {\n        if (n.enabled && \"success\" !== n.status) throw new o(n.error, null, r.CAPTCHA_FAILURE);\n        let {\n          user: e,\n          isNewUser: s,\n          wasAlreadyAuthenticated: a,\n          linkedAccount: c\n        } = await l(t);\n        i?.onComplete?.({\n          user: e,\n          isNewUser: s,\n          wasAlreadyAuthenticated: a,\n          loginMethod: \"sms\",\n          loginAccount: c\n        });\n      } catch (t) {\n        throw c({\n          status: \"error\",\n          error: t\n        }), i?.onError?.(t.privyErrorCode || r.UNKNOWN_AUTH_ERROR), t;\n      }\n    }, [l, n.status]),\n    state: a\n  };\n};\nexport { i as useLoginWithSms };","map":{"version":3,"names":["useCallback","t","PrivyErrorCode","r","useCaptcha","e","CaptchaError","o","usePrivyInternal","s","i","n","smsOtpState","a","setSmsOtpState","c","initLoginWithSms","m","loginWithCode","l","sendCode","phoneNumber","disableSignup","Error","enabled","status","error","CAPTCHA_FAILURE","execute","waitForResult","captchaToken","withPrivyUi","onError","privyErrorCode","UNKNOWN_AUTH_ERROR","code","user","isNewUser","wasAlreadyAuthenticated","linkedAccount","onComplete","loginMethod","loginAccount","state","useLoginWithSms"],"sources":["/Users/vickyfu/Documents/PredictX/frontend/node_modules/@privy-io/react-auth/dist/esm/hooks/useLoginWithSms.mjs"],"sourcesContent":["import{useCallback as t}from\"react\";import{PrivyErrorCode as r}from\"../errors.mjs\";import{useCaptcha as e,CaptchaError as o}from\"./captcha-context.mjs\";import{usePrivyInternal as s}from\"./internal-context.mjs\";import\"ofetch\";import\"react/jsx-runtime\";import\"./index.mjs\";import\"../utils/index.mjs\";import\"../connectors/get-legacy-injected-providers.mjs\";import\"../connectors/is-wallet-installed.mjs\";import\"../utils/eth/getPublicClient.mjs\";import\"viem\";const i=i=>{let n=e(),{smsOtpState:a,setSmsOtpState:c,initLoginWithSms:m,loginWithCode:l}=s();return{sendCode:t((async({phoneNumber:t,disableSignup:e})=>{try{let s;if(!t)throw Error(\"SMS required to send OTP code\");if(n.enabled&&\"error\"===n.status)throw new o(n.error,null,r.CAPTCHA_FAILURE);return n.enabled&&\"success\"!==n.status&&(n.execute(),s=await n.waitForResult()),await m({phoneNumber:t,captchaToken:s,disableSignup:e,withPrivyUi:!1})}catch(t){throw c({status:\"error\",error:t}),i?.onError?.(t.privyErrorCode||r.UNKNOWN_AUTH_ERROR),t}}),[m]),loginWithCode:t((async({code:t})=>{try{if(n.enabled&&\"success\"!==n.status)throw new o(n.error,null,r.CAPTCHA_FAILURE);let{user:e,isNewUser:s,wasAlreadyAuthenticated:a,linkedAccount:c}=await l(t);i?.onComplete?.({user:e,isNewUser:s,wasAlreadyAuthenticated:a,loginMethod:\"sms\",loginAccount:c})}catch(t){throw c({status:\"error\",error:t}),i?.onError?.(t.privyErrorCode||r.UNKNOWN_AUTH_ERROR),t}}),[l,n.status]),state:a}};export{i as useLoginWithSms};\n"],"mappings":"AAAA,SAAOA,WAAW,IAAIC,CAAC,QAAK,OAAO;AAAC,SAAOC,cAAc,IAAIC,CAAC,QAAK,eAAe;AAAC,SAAOC,UAAU,IAAIC,CAAC,EAACC,YAAY,IAAIC,CAAC,QAAK,uBAAuB;AAAC,SAAOC,gBAAgB,IAAIC,CAAC,QAAK,wBAAwB;AAAC,OAAM,QAAQ;AAAC,OAAM,mBAAmB;AAAC,OAAM,aAAa;AAAC,OAAM,oBAAoB;AAAC,OAAM,iDAAiD;AAAC,OAAM,uCAAuC;AAAC,OAAM,kCAAkC;AAAC,OAAM,MAAM;AAAC,MAAMC,CAAC,GAACA,CAAC,IAAE;EAAC,IAAIC,CAAC,GAACN,CAAC,CAAC,CAAC;IAAC;MAACO,WAAW,EAACC,CAAC;MAACC,cAAc,EAACC,CAAC;MAACC,gBAAgB,EAACC,CAAC;MAACC,aAAa,EAACC;IAAC,CAAC,GAACV,CAAC,CAAC,CAAC;EAAC,OAAM;IAACW,QAAQ,EAACnB,CAAC,CAAE,OAAM;MAACoB,WAAW,EAACpB,CAAC;MAACqB,aAAa,EAACjB;IAAC,CAAC,KAAG;MAAC,IAAG;QAAC,IAAII,CAAC;QAAC,IAAG,CAACR,CAAC,EAAC,MAAMsB,KAAK,CAAC,+BAA+B,CAAC;QAAC,IAAGZ,CAAC,CAACa,OAAO,IAAE,OAAO,KAAGb,CAAC,CAACc,MAAM,EAAC,MAAM,IAAIlB,CAAC,CAACI,CAAC,CAACe,KAAK,EAAC,IAAI,EAACvB,CAAC,CAACwB,eAAe,CAAC;QAAC,OAAOhB,CAAC,CAACa,OAAO,IAAE,SAAS,KAAGb,CAAC,CAACc,MAAM,KAAGd,CAAC,CAACiB,OAAO,CAAC,CAAC,EAACnB,CAAC,GAAC,MAAME,CAAC,CAACkB,aAAa,CAAC,CAAC,CAAC,EAAC,MAAMZ,CAAC,CAAC;UAACI,WAAW,EAACpB,CAAC;UAAC6B,YAAY,EAACrB,CAAC;UAACa,aAAa,EAACjB,CAAC;UAAC0B,WAAW,EAAC,CAAC;QAAC,CAAC,CAAC;MAAA,CAAC,QAAM9B,CAAC,EAAC;QAAC,MAAMc,CAAC,CAAC;UAACU,MAAM,EAAC,OAAO;UAACC,KAAK,EAACzB;QAAC,CAAC,CAAC,EAACS,CAAC,EAAEsB,OAAO,GAAG/B,CAAC,CAACgC,cAAc,IAAE9B,CAAC,CAAC+B,kBAAkB,CAAC,EAACjC,CAAC;MAAA;IAAC,CAAC,EAAE,CAACgB,CAAC,CAAC,CAAC;IAACC,aAAa,EAACjB,CAAC,CAAE,OAAM;MAACkC,IAAI,EAAClC;IAAC,CAAC,KAAG;MAAC,IAAG;QAAC,IAAGU,CAAC,CAACa,OAAO,IAAE,SAAS,KAAGb,CAAC,CAACc,MAAM,EAAC,MAAM,IAAIlB,CAAC,CAACI,CAAC,CAACe,KAAK,EAAC,IAAI,EAACvB,CAAC,CAACwB,eAAe,CAAC;QAAC,IAAG;UAACS,IAAI,EAAC/B,CAAC;UAACgC,SAAS,EAAC5B,CAAC;UAAC6B,uBAAuB,EAACzB,CAAC;UAAC0B,aAAa,EAACxB;QAAC,CAAC,GAAC,MAAMI,CAAC,CAAClB,CAAC,CAAC;QAACS,CAAC,EAAE8B,UAAU,GAAG;UAACJ,IAAI,EAAC/B,CAAC;UAACgC,SAAS,EAAC5B,CAAC;UAAC6B,uBAAuB,EAACzB,CAAC;UAAC4B,WAAW,EAAC,KAAK;UAACC,YAAY,EAAC3B;QAAC,CAAC,CAAC;MAAA,CAAC,QAAMd,CAAC,EAAC;QAAC,MAAMc,CAAC,CAAC;UAACU,MAAM,EAAC,OAAO;UAACC,KAAK,EAACzB;QAAC,CAAC,CAAC,EAACS,CAAC,EAAEsB,OAAO,GAAG/B,CAAC,CAACgC,cAAc,IAAE9B,CAAC,CAAC+B,kBAAkB,CAAC,EAACjC,CAAC;MAAA;IAAC,CAAC,EAAE,CAACkB,CAAC,EAACR,CAAC,CAACc,MAAM,CAAC,CAAC;IAACkB,KAAK,EAAC9B;EAAC,CAAC;AAAA,CAAC;AAAC,SAAOH,CAAC,IAAIkC,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}